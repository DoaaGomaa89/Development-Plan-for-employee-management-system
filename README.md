# Employee Management System

A modern fullâ€‘stack app to manage employees, departments, and user access with a clean React UI and a secure Spring Boot API.

---

# Tech stack
- **Frontâ€‘end:** React 18 + TypeScript + Ant Design (Vite/CRA tooling), React Router, Axios
- **Backâ€‘end:** Spring Boot 3 (Java 17), Spring Security (JWT), JPA/Hibernate
- **Database:** PostgreSQL 15
- **Docs:** OpenAPI/Swagger UI

---

# Dependencies

## Front end
- React, React Router, Axios
- Ant Design (UI components)
- TypeScript, Jest + RTL (tests)

## Back end
- `spring-boot-starter-web`, `spring-boot-starter-data-jpa`
- `spring-boot-starter-security` (JWT auth)
- PostgreSQL driver (`org.postgresql:postgresql`)
- JJWT (`io.jsonwebtoken:jjwt-*`) for JSON Web Tokens
- Lombok (optional dev convenience)
- Springdoc OpenAPI UI (`springdoc-openapi-starter-webmvc-ui`)

---

# Installing prerequisites

> Ubuntu/Debian example (adjust for your OS)

```bash
# Java 17 + Maven
sudo apt-get update
sudo apt-get install -y openjdk-17-jdk maven

# Node.js + npm (or install via nvm)
sudo apt-get install -y nodejs npm

# PostgreSQL + dev headers
sudo apt-get install -y postgresql postgresql-contrib libpq-dev
```

Windows/macOS users:
- Install **Java 17** (Temurin), **Maven**, **Node.js 18+**, and **Docker Desktop** from their official sites.
- Ensure `java -version`, `mvn -v`, and `node -v` work in your terminal.

---

# Cloning the repo

```bash
git clone <YOUR-REPO-URL>.git
cd employee-management-system
```

If you cloned previously without dependencies, run frontâ€‘end install later with `npm ci` (or `npm i`) in `/frontend`.

---

# Database schema

The schema is generated by JPA on startup (`ddl-auto` in `application.yml`). Optional seed/demo data is provided by `src/main/resources/data.sql`.

**Optional manual DB setup (psql):**
```bash
sudo -u postgres psql
CREATE DATABASE employee_db;
CREATE USER emp_user WITH ENCRYPTED PASSWORD 'YOUR_STRONG_PASSWORD';
GRANT ALL PRIVILEGES ON DATABASE employee_db TO emp_user;
```

---

# Configuration (environment variables)

These are consumed by Spring Boot (`application.yml`) and `docker-compose.yml`:

```bash
# Database
SPRING_DATASOURCE_URL=jdbc:postgresql://localhost:5432/employee_db
SPRING_DATASOURCE_USERNAME=postgres           # or emp_user
SPRING_DATASOURCE_PASSWORD=your_db_password

# JWT: use a LONG secret (>= 64 bytes) for HS512
JWT_SECRET=please_generate_a_long_random_secret_string_64chars_or_more

# CORS
CORS_ORIGINS=http://localhost:3000,http://127.0.0.1:3000
```

> Tip (Windows): This repo includes `generate-jwt-secret.bat` to generate a strong JWT secret.

---

# Building and running (manual)

## 1) Start PostgreSQL
Make sure Postgres is running and `SPRING_DATASOURCE_*` match your local setup.

## 2) Back end (Spring Boot)

```bash
cd backend/employee-management-system
mvn -DskipTests package
java -jar target/*.jar
# API at http://localhost:8080
# Swagger UI at http://localhost:8080/swagger-ui.html
```

> To run in dev with live reload:
```bash
mvn spring-boot:run
```

## 3) Front end (React)

```bash
cd frontend
npm ci
npm start          # or: npm run dev
# App at http://localhost:3000
```

---

# ğŸš€ Quick Start (Recommended) â€” Docker

The fastest way to run everything without installing local toolchains.

## Prerequisites
- Docker 20.10+
- Docker Compose v2+
- Git

## 1ï¸âƒ£ Clone and Start

```bash
git clone https://github.com/DoaaGomaa89/Development-Plan-for-employee-management-system.git
docker compose up --build
```

## 2ï¸âƒ£ Access

- **Frontend:** http://localhost:3000
- **API / Swagger UI:** http://localhost:8080/swagger-ui.html
- **PostgreSQL:** localhost:5432 (user/password from `.env` or your shell env)

> The default compose file creates a `postgres` service, builds backend & frontend, and wires health checks.

## 3ï¸âƒ£ Stop

```bash
docker compose down
# or remove volumes for a clean DB:
docker compose down -v
```

## 4ï¸âƒ£ Database shell (inside container)
```bash
docker compose exec postgres psql -U $POSTGRES_USER -d $POSTGRES_DB
```

---

# Features

- ğŸ” **JWT Authentication:** login, roleâ€‘based authorization
- ğŸ‘¥ **Employee & Department CRUD**
- ğŸ“Š **Filtering, sorting, search**
- ğŸ§° **OpenAPI docs** (try it out via Swagger UI)
- ğŸ§ª **Unit & integration tests** for critical flows

---

# API Documentation

OpenAPI spec is available at runtime via Swagger UI:  
`http://localhost:8080/swagger-ui.html`

The repository also includes `api-docs.yaml` at the repo root for offline inspection.

---

# Project Structure (key parts)

```
backend/employee-management-system
â”œâ”€â”€ src/main/java/edu/.../employee_management_system
â”‚   â”œâ”€â”€ entity/           # JPA entities: Employee, Department, User, ...
â”‚   â”œâ”€â”€ repository/       # Spring Data repositories
â”‚   â”œâ”€â”€ controller/       # REST controllers
â”‚   â”œâ”€â”€ service/          # Business logic
â”‚   â”œâ”€â”€ security/         # JWT filters/config
â”‚   â””â”€â”€ config/           # CORS, Swagger, etc.
â”œâ”€â”€ src/main/resources/
â”‚   â”œâ”€â”€ application.yml   # externalized config (DB, JWT, CORS)
â”‚   â””â”€â”€ data.sql          # optional seed data
â””â”€â”€ Dockerfile            # backend container image

frontend/
â”œâ”€â”€ src/                  # React + TS app
â”œâ”€â”€ package.json
â””â”€â”€ Dockerfile            # frontend container image

docker-compose.yml        # PostgreSQL + backend + frontend
```

---

# Troubleshooting

- **JWT error: "key size not secure enough for HS512"**  
  Use a secret **â‰¥ 64 bytes** (e.g., `generate-jwt-secret.bat`) and set `JWT_SECRET` before starting.

- **Port in use (3000/8080/5432):**  
  Stop conflicting apps or edit `docker-compose.yml` to map to different host ports, e.g.:
  ```yaml
  services:
    backend:
      ports: ["8081:8080"]
    frontend:
      ports: ["3001:3000"]
    postgres:
      ports: ["5433:5432"]
  ```

- **Clean rebuild:**  
  ```bash
  docker compose down -v
  docker compose up --build --no-cache
  ```

- **DB connection issues:**  
  Verify env vars, network, and that Postgres is `healthy` in `docker compose ps`.
  Confirm you can connect:
  ```bash
  docker compose exec postgres psql -U $POSTGRES_USER -d $POSTGRES_DB -c "\dt"
  ```

---

# ğŸ› ï¸ Advanced Setup & Production

See **PRODUCTION-SETUP.md** for hardening, environment files, and production compose (`docker-compose.prod.yml`).

<details>
<summary>ğŸ“‹ Manual frontâ€‘end dev tips</summary>

```bash
cd frontend
npm ci
npm start       # CRA/Vite dev server with HMR
```
</details>

<details>
<summary>ğŸ§ª Testing</summary>

**Backend**
```bash
cd backend/employee-management-system
mvn test
```

**Frontend**
```bash
cd frontend
npm test
```

</details>
 
